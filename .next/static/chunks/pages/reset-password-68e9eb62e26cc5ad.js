(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8006],{21173:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return s(91107)}])},30251:function(e,r,s){"use strict";s.d(r,{Z:function(){return o}});var t=s(85893);s(67294);var a=s(67074),i=s(77169);let n=(0,a.ZP)(i.Z)({width:"100%",backgroundColor:"transparent","& .MuiInputLabel-root":{fontSize:12,lineHeight:"14px",fontWeight:500,textTransform:"uppercase",color:"var(--black)",fontFamily:"'Inter', sans-serif",transform:"none","&.Mui-error":{color:"var(--red)"}},"& .MuiInputLabel-root.Mui-focused":{color:"var(--black)"},"& .MuiInput-root":{fontSize:16,fontWeight:500,lineHeight:"19px",color:"var(--black)",fontFamily:"'Inter', sans-serif","&.Mui-error::after":{borderBottomColor:"var(--red)"}},"& .MuiInput-root::before":{borderBottom:"1px solid var(--grey)"},"& .MuiInput-root:hover:not(.Mui-disabled)::before":{borderBottom:"2px solid var(--black)"},"& .MuiInput-root::after":{borderBottom:"2px solid var(--primary)"}});function o(e){return(0,t.jsx)(n,{variant:"standard",InputLabelProps:{shrink:!0},...e})}},91107:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return S}});var t=s(85893),a=s(67294),i=s(84169),n=s(52259),o=s(20679),l=s.n(o),c=s(77058),d=s(30251),u=s(77262),m=s(82175),h=s(73714),p=s(41137),v=s(11163),f=s(29969);function x(e){let{onSuccess:r,changeView:s}=e,{t:a}=(0,c.$)(),{push:i}=(0,v.useRouter)(),{phoneNumberSignIn:n}=(0,f.a)(),o=(0,m.TA)({initialValues:{email:""},onSubmit(e,t){var o;let{setSubmitting:l}=t;(null===(o=e.email)||void 0===o?void 0:o.includes("@"))?p.Z.forgotPasswordEmail(e).then(r=>{i({pathname:"/verify-phone",query:{email:e.email}}),(0,h.Vp)(r.message)}).catch(e=>(0,h.vU)(a(e.statusCode))).finally(()=>l(!1)):(console.log("phone"),n(e.email||"").then(t=>{s("VERIFY"),r({phone:e.email,callback:t})}).catch(()=>(0,h.vU)(a("sms.not.sent"))).finally(()=>l(!1)))},validate(e){var r,s,t;let i={};return e.email||(i.email=a("required")),(null===(r=e.email)||void 0===r?void 0:r.includes(" "))&&(i.email=a("should.not.includes.empty.space")),(null===(s=e.email)||void 0===s?void 0:s.includes("@"))?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(i.email=a("should.be.valid")):/^998([378]{2}|(9[013-57-9]))\d{7}$/i.test((null===(t=e.email)||void 0===t?void 0:t.replace("+",""))||"")||(console.log("email"),i.email=a("should.be.valid")),i}});return(0,t.jsxs)("form",{className:l().wrapper,onSubmit:o.handleSubmit,children:[(0,t.jsxs)("div",{className:l().header,children:[(0,t.jsx)("h1",{className:l().title,children:a("reset.password")}),(0,t.jsx)("p",{className:l().text,children:a("reset.password.text")})]}),(0,t.jsx)("div",{className:l().space}),(0,t.jsx)(d.Z,{name:"email",label:a("email.or.phone"),placeholder:a("type.here"),value:o.values.email,onChange:o.handleChange,error:!!o.errors.email}),(0,t.jsx)("div",{className:l().space}),(0,t.jsx)("div",{className:l().action,children:(0,t.jsx)(u.Z,{id:"sign-in-button",type:"submit",loading:o.isSubmitting,children:a("send")})})]})}var _=s(40523),b=s.n(_),j=s(6952),w=s(20512),g=s(21697),N=s(10626);function y(e){var r;let{phone:s,callback:i,setCallback:n}=e,{t:o}=(0,c.$)(),{settings:l}=(0,g.r)(),d=60*l.otp_expire_time||60,[x,_,y,S]=(0,w.h)(d),{push:k}=(0,v.useRouter)(),{phoneNumberSignIn:P,setUserData:Z}=(0,f.a)(),F=(0,m.TA)({initialValues:{code:""},onSubmit(e,r){let{setSubmitting:t}=r;i.confirm(e.code||"").then(()=>{p.Z.forgotPasswordPhone({phone:s,type:"firebase"}).then(e=>{let{data:r}=e,s="Bearer "+r.token;(0,N.d8)("access_token",s),Z(r.user),k("/update-password")}).catch(()=>(0,h.vU)(o("verify.error"))).finally(()=>t(!1))}).catch(()=>{(0,h.vU)(o("verify.error")),t(!1)})},validate(e){let r={};return e.code||(r.code=o("required")),r}}),I=()=>{P(s).then(e=>{S(),_(),(0,h.Vp)(o("verify.send")),n&&n(e)}).catch(()=>(0,h.vU)(o("sms.not.sent")))};return(0,a.useEffect)(()=>{_()},[]),(0,t.jsxs)("form",{className:b().wrapper,onSubmit:F.handleSubmit,children:[(0,t.jsxs)("div",{className:b().header,children:[(0,t.jsx)("h1",{className:b().title,children:o("enter.otp.code")}),(0,t.jsx)("p",{className:b().text,children:o("enter.code.text",{phone:s})})]}),(0,t.jsx)("div",{className:b().space}),(0,t.jsx)(j.Z,{value:F.values.code,onChange:e=>F.setFieldValue("code",e),numInputs:6,isInputNum:!0,containerStyle:b().otpContainer,hasErrored:!!F.errors.code}),(0,t.jsxs)("p",{className:b().text,children:[o("verify.didntRecieveCode")," ",0===x?(0,t.jsx)("span",{id:"sign-in-button",onClick:I,className:b().resend,children:o("resend")}):(0,t.jsxs)("span",{className:b().text,children:[x," s"]})]}),(0,t.jsx)("div",{className:b().space}),(0,t.jsx)("div",{className:b().actions,children:(0,t.jsx)("div",{className:b().item,children:(0,t.jsx)(u.Z,{type:"submit",disabled:6>Number(null===(r=F.values.code)||void 0===r?void 0:r.length),loading:F.isSubmitting,children:o("confirm")})})})]})}function S(e){let{}=e,[r,s]=(0,a.useState)("RESET"),[o,l]=(0,a.useState)(()=>{}),[c,d]=(0,a.useState)(""),u=e=>s(e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)(n.Z,{children:(()=>{switch(r){case"RESET":return(0,t.jsx)(x,{changeView:u,onSuccess(e){let{phone:r,callback:s}=e;d(r),l(s)}});case"VERIFY":return(0,t.jsx)(y,{changeView:u,phone:c,callback:o,setCallback:l});default:return(0,t.jsx)(x,{changeView:u,onSuccess(e){let{phone:r,callback:s}=e;d(r),l(s)}})}})()})]})}},20679:function(e){e.exports={wrapper:"resetPasswordForm_wrapper__Ix1s2",header:"resetPasswordForm_header__Jbwnh",title:"resetPasswordForm_title__yp5I9",text:"resetPasswordForm_text__jjTbX",space:"resetPasswordForm_space__gJmGe",flex:"resetPasswordForm_flex__S7h4r",item:"resetPasswordForm_item__a4_ZO",label:"resetPasswordForm_label__idtr9",action:"resetPasswordForm_action__YoZjS"}}},function(e){e.O(0,[110,2175,7169,5675,6843,9774,2888,179],function(){return e(e.s=21173)}),_N_E=e.O()}]);