(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1048],{3886:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-phone",function(){return n(32638)}])},32638:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return w}});var t=n(85893),a=n(67294),i=n(84169),r=n(52259),c=n(40523),l=n.n(c),o=n(77058),d=n(77262),u=n(82175),m=n(6952),h=n(11163),p=n(41137),x=n(73714),f=n(10626),v=n(29969),N=n(88767),j=n(20512),_=n(21697);function g(e){var s;let{}=e,{t:n}=(0,o.$)(),{mutate:i,isLoading:r}=(0,N.useMutation)({mutationFn:e=>p.Z.forgotPasswordEmail(e)}),{settings:c}=(0,_.r)(),g=60*c.otp_expire_time||60,[w,y,b,E]=(0,j.h)(g),{query:C,push:k}=(0,h.useRouter)(),{setUserData:S}=(0,v.a)(),Z=(0,u.TA)({initialValues:{code:""},onSubmit(e,s){let{setSubmitting:t}=s;p.Z.forgotPasswordVerify({verifyCode:e.code,email:C.email}).then(e=>{let{data:s}=e,n="Bearer "+s.token;(0,f.d8)("access_token",n),S(s.user),k("/update-password")}).catch(e=>(0,x.vU)(n(e.statusCode))).finally(()=>t(!1)),console.log("values => ",e)},validate(e){let s={};return e.code||(s.code=n("required")),s}}),P=()=>{i({email:C.email},{onSuccess(){E(),y(),(0,x.Vp)(n("verify.send"))},onError(e){(0,x.vU)(e.message)}})};return(0,a.useEffect)(()=>{y()},[]),(0,t.jsxs)("form",{className:l().wrapper,onSubmit:Z.handleSubmit,children:[(0,t.jsxs)("div",{className:l().header,children:[(0,t.jsx)("h1",{className:l().title,children:n("enter.otp.code")}),(0,t.jsx)("p",{className:l().text,children:n("enter.code.text",{phone:C.email})})]}),(0,t.jsx)("div",{className:l().space}),(0,t.jsx)(m.Z,{value:Z.values.code,onChange:e=>Z.setFieldValue("code",e),numInputs:6,isInputNum:!0,containerStyle:l().otpContainer,hasErrored:!!Z.errors.code}),(0,t.jsxs)("p",{className:l().text,children:[n("verify.didntRecieveCode")," ",0===w?r?(0,t.jsx)("span",{className:l().text,style:{opacity:.5},children:"Sending..."}):(0,t.jsx)("span",{onClick:P,className:l().resend,children:n("resend")}):(0,t.jsxs)("span",{className:l().text,children:[w," s"]})]}),(0,t.jsx)("div",{className:l().space}),(0,t.jsx)("div",{className:l().actions,children:(0,t.jsx)("div",{className:l().item,children:(0,t.jsx)(d.Z,{type:"submit",disabled:6>Number(null===(s=Z.values.code)||void 0===s?void 0:s.length),loading:Z.isSubmitting,children:n("confirm")})})})]})}function w(e){let{}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)(r.Z,{children:(0,t.jsx)(g,{})})]})}}},function(e){e.O(0,[2175,5675,6843,9774,2888,179],function(){return e(e.s=3886)}),_N_E=e.O()}]);