(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363],{47363:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(85893),o=a(67294),n=a(84928),s=a.n(n),l=a(48606),c=a(47567),i=a(4756),u=a.n(i),d=a(20176),h=a.n(d),p=a(67899),f=a.n(p),g=a(77058);function m(e){let{searchTerm:t,setSearchTerm:a}=e,{t:n}=(0,g.$)(),s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;null===(e=s.current)||void 0===e||e.focus()},[]),(0,r.jsxs)("div",{className:h().search,children:[(0,r.jsx)("label",{htmlFor:"search",children:(0,r.jsx)(f(),{})}),(0,r.jsx)("input",{type:"text",id:"search",ref:s,placeholder:n("search"),autoComplete:"off",value:t,onChange:e=>a(e.target.value)})]})}var _=a(88767),x=a(1612),v=a(32837),b=a(62633),N=a(2950),C=a(54935),P=a(9473),j=a(20330);function S(e){var t,a;let{i18n:n}=(0,g.$)(),i=n.language,[d,h]=(0,o.useState)(""),p=(0,l.Z)(d.trim(),400),f=(0,N.Z)(),S=(0,P.I0)(),y=()=>h(""),{data:k,fetchNextPage:w,hasNextPage:E,isFetchingNextPage:F,isLoading:O}=(0,_.useInfiniteQuery)(["shopResult",p,f,i],e=>{let{pageParam:t=1}=e;return x.Z.search({search:p,page:t,address:f,open:1})},{getNextPageParam(e){if(e.meta.current_page<e.meta.last_page)return e.meta.current_page+1},retry:!1,enabled:!!p}),{data:Z,fetchNextPage:I,hasNextPage:L,isFetchingNextPage:T,isLoading:B}=(0,_.useInfiniteQuery)(["productResult",p,i],e=>{let{pageParam:t=1}=e;return v.Z.search({search:p,page:t,address:f})},{getNextPageParam(e){if(e.meta.current_page<e.meta.last_page)return e.meta.current_page+1},retry:!1,enabled:!!p,onSuccess(){S((0,j.fy)(p))}});return(0,r.jsx)(c.default,{...e,closable:!1,children:(0,r.jsxs)("div",{className:s().root,children:[(0,r.jsx)(m,{searchTerm:d,setSearchTerm:h}),(0,r.jsxs)("div",{className:s().wrapper,children:[!!p&&(0,r.jsx)(b.Z,{isVisibleShops:!0,shops:(null==k?void 0:null===(t=k.pages)||void 0===t?void 0:t.flatMap(e=>e.data))||[],products:(null==Z?void 0:null===(a=Z.pages)||void 0===a?void 0:a.flatMap(e=>e.data))||[],isLoading:O||B,handleClickItem(){y(),e.onClose&&e.onClose({},"backdropClick")},productTotal:(null==Z?void 0:Z.pages)?Z.pages[0].meta.total:0,shopTotal:(null==k?void 0:k.pages)?k.pages[0].meta.total:0,isFetchingShopsNextPage:F,isFetchingProductsNextPage:T,hasProductsNextPage:!!L,hasShopsNextPage:!!E,fetchProductsNextPage:I,fetchShopsNextPage:w}),!p&&(0,r.jsx)(C.Z,{setSearchTerm:h})]}),(0,r.jsx)("div",{className:s().footer,children:(0,r.jsx)("button",{className:s().circleBtn,onClick(t){e.onClose&&e.onClose(t,"backdropClick")},children:(0,r.jsx)(u(),{})})})]})})}},20176:function(e){e.exports={search:"mobileSearch_search__UC3Qx"}},84928:function(e){e.exports={root:"mobileSearchContainer_root__dwdkL",wrapper:"mobileSearchContainer_wrapper__cQnFf",header:"mobileSearchContainer_header__ole3N",title:"mobileSearchContainer_title__3audD",text:"mobileSearchContainer_text__UpHfs",body:"mobileSearchContainer_body__vu6IP",footer:"mobileSearchContainer_footer__K_feH",circleBtn:"mobileSearchContainer_circleBtn__JchEu"}},4756:function(e,t,a){"use strict";var r=a(67294),o=r&&"object"==typeof r&&"default"in r?r:{default:r},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=function(e,t){var a={};for(var r in e)!(t.indexOf(r)>=0)&&Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a},l=function(e){var t=e.color,a=e.size,r=void 0===a?24:a,l=(e.children,s(e,["color","size","children"])),c="remixicon-icon "+(l.className||"");return o.default.createElement("svg",n({},l,{className:c,width:r,height:r,fill:void 0===t?"currentColor":t,viewBox:"0 0 24 24"}),o.default.createElement("path",{d:"M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"}))},c=o.default.memo?o.default.memo(l):l;e.exports=c}}]);